<div class='home-content'>
  <div class='home-head'>
    <div class='home-title'>
      <canvas id="canvas" width="55" height="55"></canvas>
      <h2>my bob</h2>

      <% if @bob.status == 'working' %>
        <h3 class='status green'><%= @bob.status %></h3>
      <% elsif @bob.status == 'waiting' %>
        <h3 class='status yellow'><%= @bob.status %></h3>
      <% else %>
        <h3 class='status red'><%= @bob.status %></h3>
      <% end %>

    </div>

    <% if @bob.status == 'working' %>
      <%= link_to bob_path(1), method: :patch do %>
        <div class='home-btn red'>
          <i class="fas fa-stop"></i>
        </div>
      <% end %>
    <% elsif @bob.status == 'waiting' %>
    <% else %>
      <%= link_to bob_path(1), method: :patch do %>
        <div class='home-btn green'>
          <i class="fas fa-play"></i>
        </div>
      <% end %>
    <% end %>

  </div>
  <h3>Today bob is trading some ETH</h3>
  <div class='home-info'>
    <div class='home-profit'>
      <div>
        <h3>Profit</h3>
      </div>
      <h3>Today: 40$</h3>
      <h3>This mounth: 140$</h3>
      <h3>This year: 1320$</h3>
    </div>

    <div class='home-log'>

      <div class='log-card'>
        <h3>Buy at: 20h32</h3>
        <h3>Current ETH price: 3534$</h3>
        <h3>SHIB balance: 2 ETH</h3>
        <h3>Balance value: 7068$</h3>
        <h3>Market direction: ðŸ“ˆ</h3>
        <div class='status log-status red'>
          <h3>buy</h3>
        </div>
      </div>

      <div class='log-card'>
        <h3>Buy at: 20h32</h3>
        <h3>Current ETH price: 3534$</h3>
        <h3>SHIB balance: 2 ETH</h3>
        <h3>Balance value: 7068$</h3>
        <h3>Market direction: ðŸ“ˆ</h3>
        <div class='status log-status yellow'>
          <h3>wait</h3>
        </div>
      </div>

      <div class='log-card'>
        <h3>Buy at: 20h32</h3>
        <h3>Current ETH price: 3534$</h3>
        <h3>SHIB balance: 2 ETH</h3>
        <h3>Balance value: 7068$</h3>
        <h3>Market direction: ðŸ“ˆ</h3>
        <div class='status log-status green'>
          <h3>sell</h3>
        </div>
      </div>

      <div class='log-card'>
        <h3>Buy at: 20h32</h3>
        <h3>Current ETH price: 3534$</h3>
        <h3>SHIB balance: 2 ETH</h3>
        <h3>Balance value: 7068$</h3>
        <h3>Market direction: ðŸ“ˆ</h3>
        <div class='status log-status yellow'>
          <h3>wait</h3>
        </div>
      </div>

      <div class='log-card'>
        <h3>Buy at: 20h32</h3>
        <h3>Current ETH price: 3534$</h3>
        <h3>SHIB balance: 2 ETH</h3>
        <h3>Balance value: 7068$</h3>
        <h3>Market direction: ðŸ“ˆ</h3>
        <div class='status log-status red'>
          <h3>buy</h3>
        </div>
      </div>

    </div>
  </div>
</div>
<script src="https://unpkg.com/rive-js"></script>
<script>
  const status = document.querySelector('.status').innerText
  const btn = document.querySelector('.home-btn')

  const working = (status === 'working') || (status === 'waiting') ? true : false

  const r = new rive.Rive({
    src: "<%= asset_path('bob.riv') %>",
    canvas: document.getElementById('canvas'),
    autoplay: true,
    stateMachines: 'state',
    fit: rive.Fit.cover,
    onLoad: (_) => {
      const inputs = r.stateMachineInputs('state');
      const statusTriger = inputs.find(i => i.name === 'status');
      statusTriger.value = working
    },
  });
</script>
